<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>附录C: 配置参数解析 | Winchell</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.CdfqIP7-.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.Bnk0dVOH.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.cCbyPC9J.js">
    <link rel="modulepreload" href="/assets/chunks/framework.B5S16sG3.js">
    <link rel="modulepreload" href="/assets/algorithm_RTKLIB-Source-Notes_C-appendixC-C.2.md.B3wARUnK.lean.js">
    <link rel="icon" href="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/doghead.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/doghead.jpg" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>Winchell</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>ROBOT</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/robot/Nav-Tools/01-overview.html" data-v-35975db6><!--[--><span data-v-35975db6>Nav-Tools</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>GNSS</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/algorithm/MobileGNSS-SPP/" data-v-35975db6><!--[--><span data-v-35975db6>MobileGNSS-SPP</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>RTKLIB</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/algorithm/RTKLIB-Manual-CN/01-overview.html" data-v-35975db6><!--[--><span data-v-35975db6>RTKLIB-Manual-CN</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/algorithm/RTKLIB-Source-Notes/01-overview.html" data-v-35975db6><!--[--><span data-v-35975db6>RTKLIB-Source-Notes</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>Fusion</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/algorithm/KF-GINS-Py/" data-v-35975db6><!--[--><span data-v-35975db6>KF-GINS-Py</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>Indoor</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/algorithm/IndoorFusionNav/" data-v-35975db6><!--[--><span data-v-35975db6>IndoorFusionNav</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/salmoshu" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/salmoshu" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1" data-v-b7550ba0 data-v-b7550ba0><div class="item" role="button" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><p class="text" data-v-b7550ba0>RTKLIB-Source-Notes</p><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/01-overview.html" data-v-b7550ba0><!--[--><h2 class="text" data-v-b7550ba0>1. 初识RTKLIB</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/01-overview-1.1.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.1 简介</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/01-overview-1.2.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.2 基本使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/01-overview-1.3.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.3 RTKLIB手册</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/01-overview-1.4.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.4 核心代码库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/01-overview-1.5.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.5 延伸项目</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/01-overview-1.6.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.6 学习建议</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/02-rtknavi-rtkrcv.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>2. 实时定位程序</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/03-rtkpos-rnx2rtkp-rtkplot-rtkget.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>3. 后处理程序</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/04-rtkcmn.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>4. 基础工具库</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/05-obs.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>5. 原始观测数据</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/06-eph.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>6. 卫星轨道计算</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/07-obs-correction.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>7. 观测值改正</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/08-spp.html" data-v-b7550ba0><!--[--><h2 class="text" data-v-b7550ba0>8. 伪距单点定位</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/08-spp-8.1.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>8.1 pntpos()：算法入口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/08-spp-8.2.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>8.2 estpos()：伪距定位</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/08-spp-8.3.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>8.3 estvel()：多普勒定速</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/08-spp-8.4.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>8.4 raim_fde()：正直性检测</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk.html" data-v-b7550ba0><!--[--><h2 class="text" data-v-b7550ba0>9. 相对定位</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk-9.1.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.1 主要数据类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk-9.2.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.2 rtkpos(): 算法入口</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk-9.3.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.3 udstate(): 时间更新</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk-9.4.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.4 *dres(): 观测方程的构建</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk-9.5.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.5 filter(): 量测更新</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk-9.6.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.6 *amb(): 模糊度固定</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/09-rtk-9.7.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>9.7 detslp*(): 周跳探测</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/10-ppp.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>10. 精密单点定位</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/11-optimization.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>11. RTKLIB工程优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/A-appendixA.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>附录A. 延伸阅读</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/B-appendixB.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>附录B. 常见问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed is-link has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/C-appendixC.html" data-v-b7550ba0><!--[--><h2 class="text" data-v-b7550ba0>附录C. 配置参数解析</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/C-appendixC-C.1.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>C.1 Setting1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/C-appendixC-C.2.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>C.2 Setting2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/C-appendixC-C.3.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>C.3 Statistics</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/algorithm/RTKLIB-Source-Notes/Z-reference.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>参考资料</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>目录</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _algorithm_RTKLIB-Source-Notes_C-appendixC-C_2" data-v-39a288b8><div><h1 id="附录c-配置参数解析" tabindex="-1">附录C: 配置参数解析 <a class="header-anchor" href="#附录c-配置参数解析" aria-label="Permalink to &quot;附录C: 配置参数解析&quot;">​</a></h1><h2 id="c-2-setting2" tabindex="-1">C.2 Setting2 <a class="header-anchor" href="#c-2-setting2" aria-label="Permalink to &quot;C.2 Setting2&quot;">​</a></h2><hr><h3 id="c-2-1-pos2-armode" tabindex="-1">C.2.1 pos2-armode <a class="header-anchor" href="#c-2-1-pos2-armode" aria-label="Permalink to &quot;C.2.1 pos2-armode&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-152829.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-1 模糊度固定模式</p><p><strong>1. 参数解读</strong></p><ul><li><strong>Continuous</strong>：持续估计并求解整数模糊度 认为模糊度是连续解，通过将前面历元解算的结果约束到滤波中，从而提高后续历元模糊度固定的精度，相邻历元的无周跳模糊度给一个极小的过程噪声。 该模式的固定率不太稳定，大部分情况下固定率相对较低，可能原因是RTKLIB数据预处理和抗差不够完善，浮点解精度很差。</li><li><strong>Instantaneous</strong>：按历元逐个估计并求解整数模糊度 该模式中相邻历元模糊度没有相关性，即每个历元做一个最小二乘，然后直接就去尝试固定模糊度。单历元模式下本历元结果仅与当前历元有关，不需要考虑滤波发散问题，缺点是未充分利用历元间的相关性。</li><li><strong>Fix and Hold</strong>：将固定的模糊度约束为已解算的值 该模式与Continues模式的差异在于，仅当模糊度固定时才会将结果约束到滤波器中。不过如果模糊度存在假固定，会导致浮点解出现较大偏差，导致较长时间的无法固定。当然这个问题Continues模式同样存在，甚至更严重。</li></ul><p>综合来看，Continuous模式不利用固定解来调整相位偏差状态，所以它对假固定最不敏感。Fix and Hold则会利用固定解的反馈来帮助跟踪与约束模糊度。</p><p>对于低成本接收机，可以使用Fix and Hold并将跟踪增益（pos2-varholdamb）调整得足够低，以最大限度地减少假固定的概率。如果armode未设置为Fix and Hold，那么后续提到的和 hold 相关的任何配置选项都不再适用。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* rtklib.h: AR mode */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ARMODE_OFF</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  /* AR mode: off */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ARMODE_CONT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  /* AR mode: continuous */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ARMODE_INST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  /* AR mode: instantaneous */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ARMODE_FIXHOLD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               /* AR mode: fix and hold */</span></span></code></pre></div><p>模糊度固定的模式状态有上面的几个宏来决定，我将从查看上面的宏在rtkpos.c中是如何被使用的。</p><p><strong>a. ARMODE_CONT</strong></p><p>ARMODE_CONT（Continues），我并没有发现它被调用，它可能出现在一些条件判断语句的else部分。</p><p><strong>b. ARMODE_INST</strong></p><p>ARMODE_INST的四次调用均在udbias（rtkpos.c）函数中，udbias随后被udstate函数调用，而udstate表示的是滤波器状态向量的时间更新操作，udstate包括：</p><ul><li>udpos：位置、速度和加速度的时间更新，及相应协方差矩阵的更新；</li><li>udion：电离层参数更新；</li><li>udtrop：对流层参数更新；</li><li>udrcvbias：GLONASS接收机硬件偏移时间更新；</li><li>udbias函数：相位偏差的更新，并最终更新单差模糊度，及相应协方差矩阵。</li></ul><p>具体而言，udbias用以维护一个相位偏差量，这里的相位偏差是一个动态估计的单差相位偏移量，用于校正载波相位观测中的模糊度（从而完成单差模糊度的时间更新）。它通过相位与伪距的差值近似计算，并在周跳检测和状态更新中不断调整。</p><p>ARMODE_INST的4次调用如下所示：</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* udbias(rtkpos.c): temporal update of phase biases */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 1. 如果所配置的AR的模式为instantaneous，则重置单差相位偏移状态量 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_INST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i,k,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt)]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {…}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 2. 卫星载波相位的中断次数rtk-&gt;ssat[i-1].outc大于配置中所设置的最大次数rtk-&gt;opt.maxout，重置单差相位偏移状态量 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_INST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i,k,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt)]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {…}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 3. AR模式为instantaneous，则跳过当前卫星的因周跳而在后续进行的相位偏移重置操作，不需要基于周跳来调整连续性状态*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_INST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(slip</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rejc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 4. 只有在非instantaneous模式下，当卫星的单差相位偏移状态量被初始化时，将该卫星的锁相计数器重置为负值（-rtk-&gt;opt.minlock），表示信号锁定状态从头开始计数。这有助于确保在连续解析模式中，只有经过足够长的稳定观测后，模糊度才被认为可靠。 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_INST) {…}</span></span></code></pre></div><p>注意：单独看ARMODE_INST的话会比较抽象，建议结合代码上下文一起看。</p><p><strong>c. ARMODE_FIXHOLD</strong></p><p>与ARMODE_ FIXHOLD相关的比较重要的函数是holdamb函数，holdamb重新构建了v和H，对满足条件的模糊度重新进行了一次量测更新（filter函数），并将约束添加到了P矩阵中。这次量测更新相对浮点的EKF是独立存在的，因此，因此代码中有一种说法是“伪新息”，即新构建的v。</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* holdamb(rtkpos.c): hold integer ambiguity */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 满足保持模糊度（hold ambiguity）的条件，如果不满足则提前退出函数 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_FIXHOLD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.minholdsats) {…}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* relpos(rtkpos.c): relative positioning */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 相对定位核心函数，触发保持模糊度的机制 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_FIXHOLD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.glomodear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GLO_ARMODE_FIXHOLD)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   holdamb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk,xa);</span></span></code></pre></div><p>注意：单独看ARMODE_ FIXHOLD的话会比较抽象，建议结合代码上下文一起看。</p><hr><h3 id="c-2-2-pos2-varholdamb-适用于demo5" tabindex="-1">C.2.2 pos2-varholdamb (适用于demo5) <a class="header-anchor" href="#c-2-2-pos2-varholdamb-适用于demo5" aria-label="Permalink to &quot;C.2.2 pos2-varholdamb (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-153637.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-2 模糊度Hold反馈方差</p><p><strong>1. 参数解读</strong></p><p>通过该参数来调整fix-and-hold模式下的跟踪增益。实际上，它是一个方差（对应EKF中R阵的对角线数值），而不是增益，因此较大的值会导致增益较低。</p><p>默认值为0.1，任何超过100的值基本都会让fix-and-hold模式失效。这个值被作用在hold过程中生成的伪测量的方差（浮点解算之后进行的一次新的量测更新），这些伪测量为卡尔曼滤波器中的偏差状态提供反馈，促使其向整数值靠拢。将这个值设置在0.1到1.0之间，既能提供足够的增益来辅助跟踪，又能避免在大多数情况下跟踪到错误的固定解。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* holdamb(rtkpos.c): hold integer ambiguity */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nv;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">R</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nv]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.varholdamb;</span></span></code></pre></div><p>参数 varholdamb 对应于EKF中测量噪声协方差矩阵 R 的对角线数值。需要注意的是，该R矩阵用于在浮点解测量更新完成后执行的一次新的测量更新。因此，该R矩阵仅适用于这一新的测量更新过程，与浮点解过程是独立的。新测量更新完成后，状态协方差矩阵P得到更新，从而对hold的模糊度状态施加约束。这些更新后的状态随后作为下一轮迭代的先验信息。</p><hr><h3 id="c-2-3-pos2-gloarmode-fix-and-hold-atuocal适用于demo5" tabindex="-1">C.2.3 pos2-gloarmode (fix-and-hold, atuocal适用于demo5) <a class="header-anchor" href="#c-2-3-pos2-gloarmode-fix-and-hold-atuocal适用于demo5" aria-label="Permalink to &quot;C.2.3 pos2-gloarmode (fix-and-hold, atuocal适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-153844.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-3 GLONASS模糊度固定模式</p><p><strong>1. 参数解读</strong></p><p>该参数与GLONASS卫星的整数模糊度解算相关。设置方法：</p><ul><li><strong>ON</strong>。如果你的接收机类型相同，或者两者的GLONASS硬件偏差均为零，你可以将此参数设置为“on”。</li><li><strong>Fix and Hold</strong>。如果你的接收机偏差不同，则需要考虑通道间偏差。最简单的处理方法是将此参数设置为“fix-and-hold”。在这种情况下，GLONASS卫星在通道间偏差校准完成之前不会用于模糊度解算，而通道间偏差的校准从第一次hold开始。</li><li><strong>Auto Cal</strong>。作为另一种选择，你可以将此参数设置为“autocal”，然后通过“pos2-arthres2”参数指定基准站和移动站之间的差分硬件偏移。这将允许GLONASS卫星立即用于模糊度解算，因此通常比“fix-and-hold”设置表现更好。此外，“autocal”功能还可以通过迭代方法，使用零基线或短基线来确定通道间偏差。</li></ul><p><strong>2. 源码解析</strong></p><p>这一部分暂时不在笔者的兴趣范围内，延伸阅读参考附录<a href="/algorithm/RTKLIB-Source-Notes/A-appendixA.html#a-8-glonass模糊度固定的算法优化">A.8：GLONASS模糊度固定的算法优化</a>。</p><hr><h3 id="c-2-4-pos2-gainholdamb-适用于demo5" tabindex="-1">C.2.4 pos2-gainholdamb (适用于demo5) <a class="header-anchor" href="#c-2-4-pos2-gainholdamb-适用于demo5" aria-label="Permalink to &quot;C.2.4 pos2-gainholdamb (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-154139.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-4 GLONASS卫星通道间偏差校准增益</p><p><strong>1. 参数解读</strong></p><p>在demo5代码中，可以通过这个参数来调整GLONASS卫星通道间偏差校准的增益。</p><p><strong>2. 源码解析</strong></p><p>该部分可以参考C.2.2节。</p><hr><h3 id="c-2-5-pos2-arthres" tabindex="-1">C.2.5 pos2-arthres <a class="header-anchor" href="#c-2-5-pos2-arthres" aria-label="Permalink to &quot;C.2.5 pos2-arthres&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-154345.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-5 Ratio-Test阈值</p><p><strong>1. 参数解读</strong></p><p>用于判断模糊度固定解是否有足够的置信度（比率阈值），从而确定固定解。它是次优解的残差平方与最优解的残差平方的比值（ratio-test），通常将比值保持在默认值3.0，并同时调整其他参数。</p><p>尽管较大的ratio阈值表示比较低的阈值具有更高的置信度，但两者之间并没有确定的关系。卡尔曼滤波器状态中的误差越大，对于给定的AR比值，对该解的置信度就越低。一般来说，卡尔曼滤波器的误差在首次收敛时最大，因此此时最有可能出现错误的固定解。降低pos2-arthres1参数可以帮助避免这种情况。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* resamb_LAMBDA(rtkpos.c): resolve integer ambiguity by LAMBDA */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 1. 根据查找表计算ratio，该部分参考3.6节 */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">coeff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> coeff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ar_poly_coeffs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i][j];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 2. 当minAR==maxAR的时候，直接使用固定ratio（thresar[0]） */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.thres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)opt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* manage_amb_LAMBDA(rtkpos.c): resolve integer ambiguity by LAMBDA using partial fix techniques and multiple attempts */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 3. 如果不满足固定规则，则省略模糊度固定过程*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PMODE_DGPS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_OFF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">posvar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) {…}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 4. 如果结果比前一历元差很多或低于ratio阈值，则移除新的卫星。 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (nb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.prev_ratio2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.thres </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.ratio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.thres) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.ratio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.ratio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.prev_ratio1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))) {…}</span></span></code></pre></div><p>pos2-arthres参数主要由rtk-&gt;opt.thresar[0]控制，demo5-b34k版本中模糊度固定的ratio阈值由卫星数目动态决定。</p><hr><h3 id="c-2-6-pos2-arthresmin-max-适用于demo5" tabindex="-1">C.2.6 pos2-arthresmin/max (适用于demo5) <a class="header-anchor" href="#c-2-6-pos2-arthresmin-max-适用于demo5" aria-label="Permalink to &quot;C.2.6 pos2-arthresmin/max (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-154644.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-6 可变Ratio-Test阈值</p><p><strong>1. 参数解读</strong></p><p>如果这些值被设置为等于pos2-arthres，那么模糊度解算阈值将被固定。否则，阈值将根据用于模糊度解算的卫星数量进行调整。对于8对卫星的情况，将使用标准值，随着卫星数量的增加，阈值会降低，而随着卫星数量的减少，阈值会增加。调整后的值将被最小和最大阈值限制所限制。调整率基于FFRT方法所使用的值，demo5的实现过程仅根据卫星数量进行调整，而不考虑模型强度。</p><p><strong>2. 源码解析</strong></p><p>自适应ratio方法的核心是通过多项式拟合，根据卫星对数量（最多 50 对）动态调整 AR 比率。这里的理论来自于论文[8]，其中部分摘录的内容参考<a href="/algorithm/RTKLIB-Source-Notes/A-appendixA.html#a-9-自适应ratio">附录B.3：自适应Ratio</a>。与其相关的代码主要出现在resamb_LAMBDA（rtkpos.c）中。</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">coeff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> coeff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ar_poly_coeffs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i][j];</span></span></code></pre></div><p>通过遍历一个 3×5 的查找表（ar_poly_coeffs），随后基于标准 AR 阈值（opt-&gt;thresar[0]）计算三个多项式系数（coeff[0]、coeff[1]、coeff[2]）。</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.thres </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.thres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nb1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">coeff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i];</span></span></code></pre></div><p>使用二次多项式拟合，根据卫星对数量 nb1 调整 AR 比率。每次迭代将当前值乘以 1/(nb1+1) 并加上下一个系数，生成最终的调整后比率 rtk-&gt;sol.thres。</p><hr><h3 id="c-2-7-pos2-arfilter-适用于demo5" tabindex="-1">C.2.7 pos2-arfilter (适用于demo5) <a class="header-anchor" href="#c-2-7-pos2-arfilter-适用于demo5" aria-label="Permalink to &quot;C.2.7 pos2-arfilter (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-154914.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-7 AR Filter新卫星处理功能</p><p><strong>1. 参数解读</strong></p><p>将此“arfilter”参数设置为“on”将允许对新卫星或从周跳中恢复的卫星进行有效性检验。如果一颗卫星在首次加入时显著恶化了模糊度比率（AR ratio），那么它在模糊度解算中的使用将被延迟。启用此功能可以让你减少对“arlockcnt”参数的使用，该参数虽然也有类似的作用，但它是通过固定的延迟计数来实现的，不是很灵活。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* manage_amb_LAMBDA(rtkpos.c): resolve integer ambiguity by LAMBDA using partial fix techniques and multiple attempts */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 如果不满足固定规则，则省略模糊度固定过程*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.arfilter) {…}</span></span></code></pre></div><p>arfilter通过检测 AR 比率下降（当前解质量低于前一历元或阈值），识别并剔除可能引入噪声的新卫星，改善模糊度解析的可靠性。其具体的过程如下所示：</p><ul><li>检查 AR 滤波器是否启用。</li><li>比较当前和前一历元的 AR 比率，若质量显著下降，进入剔除逻辑。</li><li>遍历卫星，剔除锁定计数为 0 的新卫星，并设置延迟。</li><li>若有卫星被剔除，则重新运行 LAMBDA 解析。</li></ul><p>该逻辑主要依赖于 AR 比率的动态变化，旨在避免因新卫星引入的错误固定（false fix），并通过分阶段延迟减少对新卫星的过度剔除。此机制在滤波器收敛初期尤为重要，因为新卫星可能因信号不稳定导致解质量下降。</p><hr><h3 id="c-2-8-pos2-arthres1-适用于demo5" tabindex="-1">C.2.8 pos2-arthres1 (适用于demo5) <a class="header-anchor" href="#c-2-8-pos2-arthres1-适用于demo5" aria-label="Permalink to &quot;C.2.8 pos2-arthres1 (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-155820.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-8 模糊度求解延迟位置方差阈值</p><p><strong>1. 参数解读</strong></p><p>整数模糊度解算将延迟到位置状态的方差达到此阈值时才开始进行。其目的是避免在滤波器中的偏差状态尚未收敛之前出现的假固定。如果你将“eratio1”设置为大于100的值，并且使用单星座或单频解，那么将此参数设置为相对较低的值尤为重要。如果你在解算结果中看到模糊度比率（AR ratio）为零的情况持续过长，那么你可能需要增加这个阈值，因为这意味着由于未达到阈值，模糊度解算被禁用了。demo5作者发现0.004到0.10的值通常对一些低成本接收机很有效，但如果你的测量数据质量较低，你可能需要增加这个值，以避免首次固定解的延迟过长，或者在多次发生周跳后丢失固定解。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* udpos(rtkpos.c): temporal update of position/velocity/acceleration */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* include accel terms if filter is converged */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        F</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nx]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tt)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这表明当滤波器收敛时，位置状态的更新会考虑加速度的贡献，提高动态建模的精度。如果 var 超过 thresar[1]，状态转移矩阵 F 仅包含位置与速度的线性关系（F[i + (i + 3) * nx] = tt），忽略加速度效应。在方差较大的情况下，不加入加速度项并重置状态的设计可能是为了防止发散。</p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* manage_amb_LAMBDA(rtkpos.c): resolve integer ambiguity by LAMBDA using partial fix techniques and multiple attempts */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* skip AR if don&#39;t meet criteria */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PMODE_DGPS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_OFF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">posvar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">thresar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    trace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Skip AR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;sol.ratio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;sol.prev_ratio1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;sol.prev_ratio2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;nb_ar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这段代码的作用是作为 AR 过程的前置条件，根据当前的定位模式、AR 配置和位置估计质量（方差）决定是否执行 LAMBDA 模糊度解析。如果不满足条件，则不进行AR操作并重置相关状态。arthres1的作用主要是希望位置方差收敛到一定程度以后再进行AR操作，这样避免了在滤波器中的偏差状态尚未收敛之前出现的假固定。</p><hr><h3 id="c-2-9-pos2-arthres2-适用于demo5" tabindex="-1">C.2.9 pos2-arthres2 (适用于demo5) <a class="header-anchor" href="#c-2-9-pos2-arthres2-适用于demo5" aria-label="Permalink to &quot;C.2.9 pos2-arthres2 (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-161050.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-9 GLONASS硬件偏差</p><p><strong>1. 参数解读</strong></p><p>按频率槽计算的相对GLONASS硬件偏差（m）。仅当pos2-gloarmode设置为“autocal”时，才会使用此参数，用于指定两个不同接收机制造商之间的通道间偏差。有关常见接收机类型的合适值，以及如何使用此参数进行迭代搜索以找到未指定接收机类型的值。</p><p><strong>2. 源码解析</strong></p><p>这一部分暂时不在笔者的兴趣范围内，详情请参阅资料[13]。</p><hr><h3 id="c-2-10-pos2-arthres3-适用于demo5" tabindex="-1">C.2.10 pos2-arthres3 (适用于demo5) <a class="header-anchor" href="#c-2-10-pos2-arthres3-适用于demo5" aria-label="Permalink to &quot;C.2.10 pos2-arthres3 (适用于demo5)&quot;">​</a></h3><p><strong>1. 参数解读</strong></p><p>GLONASS硬件偏差状态的初始方差。仅当pos2-gloarmode设置为“autocal”时，才会使用此参数。较小的值会使pos2-arthres2中指定的初始值获得更大的权重。当pos2-arthres2设置为已知偏差时，demo5作者使用1e-9；而在进行迭代搜索时，demo5作者使用1e-7。</p><p><strong>2. 源码解析</strong></p><p>这一部分暂时不在笔者的兴趣范围内，详情请参阅资料[13]。</p><hr><h3 id="c-2-11-pos2-arthres4-适用于demo5" tabindex="-1">C.2.11 pos2-arthres4 (适用于demo5) <a class="header-anchor" href="#c-2-11-pos2-arthres4-适用于demo5" aria-label="Permalink to &quot;C.2.11 pos2-arthres4 (适用于demo5)&quot;">​</a></h3><p><strong>1. 参数解读</strong></p><p>GLONASS硬件偏差状态的卡尔曼滤波器过程噪声。较小的值会使pos2-arthres2中指定的初始值获得更大的权重。当pos2-arthres2设置为已知偏差时，demo5作者使用0.00001；而在进行迭代搜索时，demo5作者使用0.001。</p><p><strong>2. 源码解析</strong></p><p>这一部分暂时不在笔者的兴趣范围内，详情请参阅资料[13]。</p><hr><h3 id="c-2-12-pos2-arlockcnt" tabindex="-1">C.2.12 pos2-arlockcnt <a class="header-anchor" href="#c-2-12-pos2-arlockcnt" aria-label="Permalink to &quot;C.2.12 pos2-arlockcnt&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-161342.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-10 用于模糊度固定的最小锁定计数</p><p><strong>1. 参数解读</strong></p><p>在将新卫星或从周跳中恢复的卫星用于整数模糊度解算之前，需要延迟的采样数。这可以避免因包含尚未收敛的卫星而导致模糊度比值（AR ratio）被破坏。需与“arfilter”配合使用。请注意，单位是采样数，而不是时间单位，因此如果你更改了移动站测量的采样率，可能需要对其进行调整。demo5作者通常将此参数设置为零，因为u-blox接收机在标记可疑观测值方面表现非常好，但对于其他接收机，demo5作者会将其设置得更高。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* udbias(rtkpos.c): temporal update of phase biases */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 1. reset phase-bias if instantaneous AR or expire obs outage counter */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_INST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reset) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;ssat[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].lock[k]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt.minlock;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* update phase bias noise and check for cycle slips */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ns;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk-&gt;opt.modear </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ARMODE_INST </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(slip </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rejc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 2. reset phase-bias state if detecting cycle slip or outlier */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;x[j] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;ssat[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].rejc[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;ssat[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].lock[k]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt.minlock;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    …</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* set initial states of phase-bias */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ns; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rtk-&gt;x[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i],k,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt)] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    initx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i], </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SQR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk-&gt;opt.std[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i],k,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    trace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;     sat=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%3d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, F=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: init phase=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%.3f\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i], k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk-&gt;opt.modear </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ARMODE_INST) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rtk-&gt;ssat[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].lock[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt.minlock;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>minlock在udbias中调用了三次，minlock 在这三处都用于延迟新卫星或不稳定卫星的加入，确保信号质量达到要求后才参与整数模糊度解析。具体作用分别是：</p><ul><li>第一次：在观测中断计数溢出（reset）时，将卫星锁定计数设为负值，延迟其使用，适用于AR 模式不为instantaneous的中断恢复。</li><li>第二次：在检测到周跳或异常值时，重置相位偏移并延迟卫星使用，确保信号稳定后再参与解算。</li><li>第三处：管理新初始化的相位偏移。</li></ul><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* manage_amb_LAMBDA(rtkpos.c): resolve integer ambiguity by LAMBDA using partial fix techniques and multiple attempts */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ssat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[f] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    trace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;remove sat </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lock=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%d\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i], f, rtk-&gt;ssat[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].lock[f]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;ssat[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].lock[f] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt.minlock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dly;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* delay use of this sat with stagger */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dly </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* stagger next try of new sats */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rerun </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>minlock 在此处的角色是延迟新卫星的加入，确保其信号稳定后才用于模糊度解析。具体通过将锁定计数设为负值（-minlock - dly），配合分阶段延迟和重新运行 AR，减少了新卫星引入的不确定性。</p><hr><h3 id="c-2-13-pos2-minfixsats-适用于demo5" tabindex="-1">C.2.13 pos2-minfixsats (适用于demo5) <a class="header-anchor" href="#c-2-13-pos2-minfixsats-适用于demo5" aria-label="Permalink to &quot;C.2.13 pos2-minfixsats (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-161630.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-11 获得固定解所需的最小卫星数量</p><p><strong>1. 参数解读</strong></p><p>获得固定解所需的最小卫星数量。用于避免因极少数卫星而导致的假固定，尤其是在频繁发生周跳的期间。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* resamb_LAMBDA(rtkpos.c): resolve integer ambiguity by LAMBDA */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((nb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddidx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk,ix,gps,glo,sbs))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.minfixsats</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* nb is sat pairs */</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    errmsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;not enough valid double-differences</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ix);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* flag abort */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>minfixsats 的作用是作为模糊度固定过程的最小卫星对数阈值，确保 AR 过程有足够的数据基础。如果有效双差对数 nb 小于 minfixsats - 1，则中止 LAMBDA 固定，防止因卫星数量不足导致的错误解。</p><hr><h3 id="c-2-14-pos2-minholdsats-适用于demo5" tabindex="-1">C.2.14 pos2-minholdsats (适用于demo5) <a class="header-anchor" href="#c-2-14-pos2-minholdsats-适用于demo5" aria-label="Permalink to &quot;C.2.14 pos2-minholdsats (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-161815.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-12 整数模糊度结果进入 hold 阶段所需的最小卫星数量</p><p><strong>1. 参数解读</strong></p><p>整数模糊度结果进入 hold 阶段所需的最小卫星数量。用于避免因极少数卫星而导致的错误保持，尤其是在频繁发生周跳的期间。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* holdamb(rtkpos.c): hold integer ambiguity */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* return if less than min sats for hold (skip if fix&amp;hold for GLONASS only) */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_FIXHOLD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.minholdsats) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    trace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;holdamb: not enough sats to hold ambiguity</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v); </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(H);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>minholdsats 的作用是作为“Fix-and-Hold”模式下模糊度进入hold状态的最小卫星对数阈值，确保有足够的数据支持保持过程。如果双差对数 nv 小于 minholdsats，则中止模糊度hold，防止因卫星数量不足导致的解不稳定或错误的hold。注意这里的minholdsats没有像前面的minfixsats一样减1。</p><hr><h3 id="c-2-15-pos2-mindropsats-适用于demo5" tabindex="-1">C.2.15 pos2-mindropsats (适用于demo5) <a class="header-anchor" href="#c-2-15-pos2-mindropsats-适用于demo5" aria-label="Permalink to &quot;C.2.15 pos2-mindropsats (适用于demo5)&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-161949.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-13 每个历元排除单颗卫星所需的最小模糊度数量</p><p><strong>1. 参数解读</strong></p><p>启用每历元排除单颗卫星进行模糊度解算所需的最小卫星数量。在每个历元中，会排除一颗不同的卫星。如果排除某颗卫星后，模糊度比值显著改善，则该卫星将从用于模糊度解算的卫星列表中移除。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* manage_amb_LAMBDA(rtkpos.c): resolve integer ambiguity by LAMBDA using partial fix techniques and multiple attempts */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.prev_ratio2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.thres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nb_ar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.mindropsats) {…}</span></span></code></pre></div><p>这段代码的作用是在前一历元未固定且卫星对数足够时，剔除列表中的下一个卫星（由 arsats[rtk-&gt;excsat] 确定），以排除可能影响 AR 质量的卫星。rtk-&gt;excsat 的递增和重置机制实现了逐步试错，延迟剔除卫星的重新使用，支持后续 AR 和hold过程的优化。</p><p>这样做的效果是在未来历元中，逐步剔除卫星并尝试模糊度的固定，带有一定的随机性，不过在工程上它是有效的。</p><hr><h3 id="c-2-16-pos2-arelmask" tabindex="-1">C.2.16 pos2-arelmask <a class="header-anchor" href="#c-2-16-pos2-arelmask" aria-label="Permalink to &quot;C.2.16 pos2-arelmask&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-162437.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-14 用于模糊度固定的最小仰角</p><p><strong>1. 参数解读</strong></p><p>功能上与默认值0没有区别，因为小于“elmask”的高度角不会用于模糊度解算，但demo5作者将其更改以避免混淆。</p><hr><h3 id="c-2-17-pos2-arminfix" tabindex="-1">C.2.17 pos2-arminfix <a class="header-anchor" href="#c-2-17-pos2-arminfix" aria-label="Permalink to &quot;C.2.17 pos2-arminfix&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-163406.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-15 模糊度进入hold所需的连续固定样本数量</p><p><strong>1. 参数解读</strong></p><p>模糊度进入hold所需的连续固定样本数量。增加此值可能是减少错误hold的最有效方法，但同时也会增加首次hold的时间和重新获得hold的时间。随着模糊度跟踪增益的降低（即pos2-varholdamb增加）和观测数量的增加，可以减少arminfix。请注意，如果移动站测量的采样率发生变化，可能需要调整此值。</p><p><strong>2. 源码解析</strong></p><p><strong>a. 代码1</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* udrcvbias(rtkpos.c): temporal update of receiver h/w biases */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* hold to fixed solution */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nfix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.minfix) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    initx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk,rtk-&gt;xa[j],rtk-&gt;Pa[j</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">j</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;na],j);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><code>udrcvbias</code> 函数是 RTKLIB 中 <code>udstate</code> 函数的一部分，用于 时间更新（temporal update）接收机的硬件偏差（receiver hardware bias）状态，具体针对 GLONASS 系统（当 <code>rtk-&gt;opt.navsys &amp; SYS_GLO 且 rtk-&gt;opt.glomodear == GLO_ARMODE_AUTOCAL</code> 时）。</p><p>该函数在 RTK 定位中管理 GLONASS 接收机的频率通道偏差（Inter-Frequency Bias, IFB），以确保相位观测的正确处理和模糊度解算的精度。</p><p>而上述的代码片段的作用是：当模糊度固定成功时，将 GLONASS 接收机 IFB 状态更新为固定解的值。</p><p><strong>b. 代码2</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* hold integer ambiguity if meet minfix count */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nfix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.minfix) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk-&gt;opt.modear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ARMODE_FIXHOLD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk-&gt;opt.glomodear</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GLO_ARMODE_FIXHOLD)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        holdamb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk,xa);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* switch to kinematic after qualify for hold if in static-start mode */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rtk-&gt;opt.mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PMODE_STATIC_START) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rtk-&gt;opt.mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PMODE_KINEMA;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        trace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Fix and hold complete: switch to kinematic mode</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>此处的的作用是：在连续固定模糊度的历元数达到最小阈值（<code>minfix</code>）后，执行固定解的保持操作（hold ambiguity）并可能切换定位模式（主要针对 STATIC-START 模式）。其中，<code>rtk-&gt;opt.minfix</code> 是配置文件中设定的最小固定历元数阈值，用于确保固定解的稳定性。</p><hr><h3 id="c-2-18-pos2-elmaskhold" tabindex="-1">C.2.18 pos2-elmaskhold <a class="header-anchor" href="#c-2-18-pos2-elmaskhold" aria-label="Permalink to &quot;C.2.18 pos2-elmaskhold&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-162613.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-16 设置最小仰角来保持模糊度</p><p><strong>1. 参数解读</strong></p><p>功能上与默认值0没有区别，因为小于“elmask”的高度角不会用于保持模糊度解算结果，但demo5作者将其更改以避免混淆。</p><hr><h3 id="c-2-19-pos2-aroutcnt" tabindex="-1">C.2.19 pos2-aroutcnt <a class="header-anchor" href="#c-2-19-pos2-aroutcnt" aria-label="Permalink to &quot;C.2.19 pos2-aroutcnt&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-163633.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-17 数据中断阈值（以重置模糊度）</p><p><strong>1. 参数解读</strong></p><p>导致模糊度重置的连续缺失样本数量。该参数与流动站的采样率有关，因此如果采样率发生变化，则需要调整此值。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* udbias (rtkpos.c): temporal update of phase biases */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* expire obs outage counter */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ssat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">outc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[k]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint32_t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt.maxout;</span></span></code></pre></div><p>在分析 <code>pos2-arlockcnt</code> 参数的时候有提及到 <code>reset</code> 。</p><p><code>reset</code> 的作用是判断是否需要重置单差相位偏移（phase-bias）状态量，通过检查卫星载波相位观测的中断次数（outc）是否超过配置文件中设定的最大中断次数阈值（<code>maxout</code>）。</p><p>长时间中断可能由信号丢失、周跳、接收机锁定失败等引起。</p><hr><h3 id="c-2-20-pos2-maxage" tabindex="-1">C.2.20 pos2-maxage <a class="header-anchor" href="#c-2-20-pos2-maxage" aria-label="Permalink to &quot;C.2.20 pos2-maxage&quot;">​</a></h3><img style="width:80%;margin:20px auto;display:block;" src="https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/20250709-163803.jpg"><p style="text-align:center;font-family:&#39;Microsoft YaHei&#39;, SimSun, Arial, sans-serif;font-size:14px;">图C.2-18 差分龄期的最大值</p><p><strong>1. 参数解读</strong></p><p>该指标可以理解为来自基站差分数据的时效性，定义为流动站与基站之间的最大延迟时间（s）。延迟通常是由于差分数据传输链路异常所导致的数据丢失。demo5版本代码可以将其从默认值提高，因为在首次 fix-and-hold 后，即使这个值变得较大，仍可以获得较好的结果。</p><p><strong>2. 源码解析</strong></p><p><strong>a. 代码1</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* intpres (rtkpos.c): time-interpolation of residuals (for post-processing solutions) */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fabs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ttb)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">maxtdiff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ttb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tt) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tt;</span></span></code></pre></div><p><code>intpres</code> 主要用于后处理解算（post-processing），通过 <strong>时间插值</strong> 对基站观测的残差（y）进行调整，使其与流动站观测的时间（time）对齐。</p><p>该代码片段的作用是 <strong>判断是否进行时间插值操作</strong>，主要基于两个条件：(1) 上一组基站观测（<code>obsb</code>）与流动站观测（<code>time</code>）的时间差（<code>ttb</code>）过大，或 (2) 上一组与当前基站观测的时间差相同（以避免冗余计算）。<code>opt-&gt;maxtdiff</code> 在此起到 <strong>时间差阈值</strong> 的作用，控制时间插值的有效性。</p><p><strong>b. 代码2</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* relpos(rtkpos.c): relative positioning */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (opt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PMODE_MOVEB) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* check if exceeded max age of differential */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;sol.age</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fabs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk-&gt;sol.age)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt-&gt;maxtdiff) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        errmsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age of differential error (age=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%.1f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,rtk-&gt;sol.age);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rs); </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dts); </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var); </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y); </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e); </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(azel); </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">free</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(freq);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>若时间差（<code>dt</code>）超过 <code>maxtdiff</code>，说明基站数据太旧，可能不可靠，触发错误，释放内存并终止相对定位（退化为单点定位）。</p><p>至于 <code>PMODE_MOVEB</code> 模式（即 <strong>movingbase</strong>）为什么会跳过，并不是因为 <strong>movingbase</strong> 不需要时间同步，而是由于：</p><p><strong>movingbase</strong> 模式下，基站和流动站通常在一个载体上，RTKLIB 在设计 <strong>movingbase</strong> 模式时，假设了基站和流动站的观测数据是实时或近实时传输的，因此对时间同步会有更严格的要求，最大的时间差小于1.05s（<code>TTOL_MOVEB</code>），此时 <code>pos2-maxage</code> 的配置不起作用（准确来讲是换了一种方式作用）。</p><p><strong>c. 代码3</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* rtkpos(rtkpos.c): precise positioning */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fabs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sol.age) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TTOL_MOVEB, opt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">maxtdiff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    errmsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;time sync error for moving-base (age=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%.1f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, rtk-&gt;sol.age);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这段代码主要作用于 <strong>movingbase</strong> 模式。在代码2中已有提及，这里的作用是检查基站与流动站观测的时间差（差分龄期，<code>rtk-&gt;sol.age</code>）是否超过允许的最大阈值，以确保时间同步的有效性。</p><p><code>opt-&gt;maxtdiff</code> 在此作为时间阈值的参考值，与 <code>TTOL_MOVEB</code>（1.05s）比较后取较小值。而通常 <code>TTOL_MOVEB</code>（1.05s）要远小于 <code>opt-&gt;maxtdiff</code>。</p><hr><h3 id="c-2-21-pos2-rejionno" tabindex="-1">C.2.21 pos2-rejionno <a class="header-anchor" href="#c-2-21-pos2-rejionno" aria-label="Permalink to &quot;C.2.21 pos2-rejionno&quot;">​</a></h3><p><strong>1. 参数解读</strong></p><p><code>pos2-rejionno</code> 指的 <strong>EKF 新息</strong> 的拒绝阈值，这里新息指的是 <strong>验前残差</strong>，偶尔大家也会称其为 <strong>OMC（Observation Minus Computed）</strong> 以便于记忆。</p><p>如果新息大于该值（m），则拒绝该观测值。在 demo5 b33 代码之前，该值未经调整直接应用于伪距和载波相位。在较新版本中，该值仍直接应用于相位观测值，但伪距观测值会乘以 <code>eratio</code>。这使得可以根据相位测量设置合适的值。</p><p>demo5 作者通常将其设置为1.0，这有助于捕获并避免未标记的周跳，但有时需要将其设置得更高。设置得过低可能导致滤波器在数据质量较差时发散，因此 demo5 作者将默认值设置为 2.0，不过常用值则是 1.0。</p><p><strong>2. 源码解析</strong></p><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ddres(rtkpos.c): double-differenced residuals and partial derivatives */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* if residual too large, flag as outlier */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对载波相位/伪距双差进行检查，如果过大超过阈值，则认为无效，阈值opt→maxinno为30。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fabs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[nv])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">opt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">maxinno</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[code]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">threshadj) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;ssat[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[j]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].vsat[frq]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rtk-&gt;ssat[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[j]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].rejc[frq]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    errmsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rtk,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;outlier rejected (sat=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%3d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%3d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> %s%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%.3f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i],</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[j],code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;P&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;L&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,frq</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[nv]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这段代码的作用是检查双差残差（<code>v[nv]</code>）是否过大，若超过阈值（<code>opt-&gt;maxinno[code] * threshadj</code>），则将其标记为异常值（outlier），剔除该观测数据，避免其影响卡尔曼滤波的量测更新。<code>opt-&gt;maxinno</code> 作为残差阈值，起关键的异常值检测作用。</p><div class="giscus"></div></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/algorithm/RTKLIB-Source-Notes/C-appendixC-C.1.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>C.1 Setting1</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/algorithm/RTKLIB-Source-Notes/C-appendixC-C.3.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>C.3 Statistics</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"DuzN6EfT\",\"algorithm_indoorfusionnav_index.md\":\"C4u5cByb\",\"algorithm_kf-gins-py_index.md\":\"BRrd0rnE\",\"algorithm_mobilegnss-spp_01-overview.md\":\"CYbnccfY\",\"algorithm_mobilegnss-spp_02-data_analysis.md\":\"CgLnpzuV\",\"algorithm_mobilegnss-spp_03-rwls.md\":\"BZ9LfX2A\",\"algorithm_mobilegnss-spp_04-ekf.md\":\"CAEgQVDf\",\"algorithm_mobilegnss-spp_05-mincost.md\":\"C0WBc0aa\",\"algorithm_mobilegnss-spp_06-appendix.md\":\"D-Aahn9T\",\"algorithm_mobilegnss-spp_07-reference.md\":\"CYHkcNQb\",\"algorithm_mobilegnss-spp_index.md\":\"CgiZKw_O\",\"algorithm_rtklib-manual-cn_01-overview.md\":\"B2Qa6yLU\",\"algorithm_rtklib-manual-cn_02-prepare.md\":\"wtNoF32S\",\"algorithm_rtklib-manual-cn_03-instructions-3.1.md\":\"BgyfrwVP\",\"algorithm_rtklib-manual-cn_03-instructions-3.10.md\":\"BD6xFWnK\",\"algorithm_rtklib-manual-cn_03-instructions-3.11.md\":\"Di_gCZ4t\",\"algorithm_rtklib-manual-cn_03-instructions-3.2.md\":\"B4BUqwPj\",\"algorithm_rtklib-manual-cn_03-instructions-3.3.md\":\"xIa-pzq7\",\"algorithm_rtklib-manual-cn_03-instructions-3.4.md\":\"BtQEMY2T\",\"algorithm_rtklib-manual-cn_03-instructions-3.5.md\":\"rB0Spy1N\",\"algorithm_rtklib-manual-cn_03-instructions-3.6.md\":\"3Eh6n7_E\",\"algorithm_rtklib-manual-cn_03-instructions-3.7.md\":\"Wlg-H-fC\",\"algorithm_rtklib-manual-cn_03-instructions-3.8.md\":\"CMK5p6tF\",\"algorithm_rtklib-manual-cn_03-instructions-3.9.md\":\"CmZ68ppT\",\"algorithm_rtklib-manual-cn_04-build.md\":\"3ROzj_ch\",\"algorithm_rtklib-manual-cn_05-appendixa.md\":\"CJZxXftk\",\"algorithm_rtklib-manual-cn_06-appendixb.md\":\"Cvk0WM4i\",\"algorithm_rtklib-manual-cn_07-appendixc.md\":\"CpofTjZ5\",\"algorithm_rtklib-manual-cn_08-appendixd.md\":\"DP9IOZTK\",\"algorithm_rtklib-manual-cn_09-appendixe-e.0.md\":\"2SndLUAN\",\"algorithm_rtklib-manual-cn_09-appendixe-e.1.md\":\"Djd1JGlv\",\"algorithm_rtklib-manual-cn_09-appendixe-e.2.md\":\"DfCPMma_\",\"algorithm_rtklib-manual-cn_09-appendixe-e.3.md\":\"onhhevNU\",\"algorithm_rtklib-manual-cn_09-appendixe-e.4.md\":\"BjIWlcis\",\"algorithm_rtklib-manual-cn_09-appendixe-e.5.md\":\"CWClwvCj\",\"algorithm_rtklib-manual-cn_09-appendixe-e.6.md\":\"BUkHuSQb\",\"algorithm_rtklib-manual-cn_09-appendixe-e.7.md\":\"kACP1DJg\",\"algorithm_rtklib-manual-cn_09-appendixe-e.8.md\":\"BLRjExE5\",\"algorithm_rtklib-manual-cn_10-appendixf.md\":\"DRXmj_a6\",\"algorithm_rtklib-manual-cn_11-appendixg.md\":\"DNHoiuio\",\"algorithm_rtklib-manual-cn_12-appendixh.md\":\"Cyi3jrpH\",\"algorithm_rtklib-manual-cn_13-reference.md\":\"64MbtsRV\",\"algorithm_rtklib-manual-cn_index.md\":\"Dn598RpX\",\"algorithm_rtklib-source-notes_01-overview-1.1.md\":\"BcdlL-Vv\",\"algorithm_rtklib-source-notes_01-overview-1.2.md\":\"PpY0xqHt\",\"algorithm_rtklib-source-notes_01-overview-1.3.md\":\"D--XFgVR\",\"algorithm_rtklib-source-notes_01-overview-1.4.md\":\"DpvGMdQn\",\"algorithm_rtklib-source-notes_01-overview-1.5.md\":\"BtSP1HLP\",\"algorithm_rtklib-source-notes_01-overview-1.6.md\":\"iEB50j92\",\"algorithm_rtklib-source-notes_01-overview.md\":\"CHmailDK\",\"algorithm_rtklib-source-notes_02-rtknavi-rtkrcv.md\":\"Coa_u_U6\",\"algorithm_rtklib-source-notes_03-rtkpos-rnx2rtkp-rtkplot-rtkget.md\":\"D_1xIBkk\",\"algorithm_rtklib-source-notes_04-rtkcmn.md\":\"BOHFUPId\",\"algorithm_rtklib-source-notes_05-obs.md\":\"DlVJC4af\",\"algorithm_rtklib-source-notes_06-eph.md\":\"CFd77jOh\",\"algorithm_rtklib-source-notes_07-obs-correction.md\":\"BsAqg9ET\",\"algorithm_rtklib-source-notes_08-spp-8.1.md\":\"85SEBXvQ\",\"algorithm_rtklib-source-notes_08-spp-8.2.md\":\"Bj_ioNIa\",\"algorithm_rtklib-source-notes_08-spp-8.3.md\":\"Cr4CV77V\",\"algorithm_rtklib-source-notes_08-spp-8.4.md\":\"BWhJfCy1\",\"algorithm_rtklib-source-notes_08-spp.md\":\"B0aQosyM\",\"algorithm_rtklib-source-notes_09-rtk-9.1.md\":\"Mu5tWjPY\",\"algorithm_rtklib-source-notes_09-rtk-9.2.md\":\"YbVo8Xpv\",\"algorithm_rtklib-source-notes_09-rtk-9.3.md\":\"DXfsXekI\",\"algorithm_rtklib-source-notes_09-rtk-9.4.md\":\"Dc4SZR-J\",\"algorithm_rtklib-source-notes_09-rtk-9.5.md\":\"BL0mqjm1\",\"algorithm_rtklib-source-notes_09-rtk-9.6.md\":\"DKgpGfjd\",\"algorithm_rtklib-source-notes_09-rtk-9.7.md\":\"CZjGDtr-\",\"algorithm_rtklib-source-notes_09-rtk.md\":\"Cx3VoVik\",\"algorithm_rtklib-source-notes_10-ppp.md\":\"62wTOKIn\",\"algorithm_rtklib-source-notes_11-optimization.md\":\"VCfY-IQk\",\"algorithm_rtklib-source-notes_a-appendixa.md\":\"CVI3Dn53\",\"algorithm_rtklib-source-notes_b-appendixb.md\":\"CQxYJ2_t\",\"algorithm_rtklib-source-notes_c-appendixc-c.1.md\":\"CReFLCrN\",\"algorithm_rtklib-source-notes_c-appendixc-c.2.md\":\"B3wARUnK\",\"algorithm_rtklib-source-notes_c-appendixc-c.3.md\":\"Chvq64H9\",\"algorithm_rtklib-source-notes_c-appendixc.md\":\"CcV8N0uK\",\"algorithm_rtklib-source-notes_copy.md\":\"L8YetPhU\",\"algorithm_rtklib-source-notes_index.md\":\"DR-CZ1zY\",\"algorithm_rtklib-source-notes_z-reference.md\":\"CqWi8Z3j\",\"contribution.md\":\"IitPTdOC\",\"hide_coding_cpp-style_01-google.md\":\"PwhIQMzh\",\"hide_coding_cpp-style_02-huawei.md\":\"C6Havrsn\",\"hide_coding_cpp-style_03-myself.md\":\"DGbQj1-I\",\"hide_examples_api-examples.md\":\"DJtk52o0\",\"hide_examples_markdown-examples.md\":\"BVTqCYDl\",\"hide_index.md\":\"B9t7wH8U\",\"hide_knowledge_01-common.md\":\"CNG6lZIW\",\"hide_tools_git_01-tutorials.md\":\"CtAuipCY\",\"hide_tools_git_readme.md\":\"BBKXBl8K\",\"hide_tools_readme.md\":\"C-7VCDOT\",\"hide_tools_vitepress_01-tutorials.md\":\"BY1R2NPN\",\"hide_tools_vitepress_02-issues.md\":\"o470OhYo\",\"hide_tools_vitepress_readme.md\":\"oK8rfuZ8\",\"index.md\":\"BXfTyAsM\",\"robot_nav-tools_01-overview.md\":\"z5wxE2AM\",\"robot_nav-tools_02-basic_usage.md\":\"Djb7xNwT\",\"robot_nav-tools_03-robot.md\":\"CfBkJKbi\",\"robot_nav-tools_04-perception.md\":\"BpZvoCLI\",\"robot_nav-tools_05-localization.md\":\"DjygEW4Z\",\"robot_nav-tools_06-control.md\":\"Bz-HWPEx\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Winchell\",\"description\":\"A VitePress Site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"https://raw.githubusercontent.com/salmoshu/Winchell-ImgBed/main/img/doghead.jpg\",\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"ROBOT\",\"items\":[{\"text\":\"Nav-Tools\",\"link\":\"/robot/Nav-Tools/01-overview\"}]},{\"text\":\"GNSS\",\"items\":[{\"text\":\"MobileGNSS-SPP\",\"link\":\"/algorithm/MobileGNSS-SPP/\"},{\"text\":\"RTKLIB\",\"items\":[{\"text\":\"RTKLIB-Manual-CN\",\"link\":\"/algorithm/RTKLIB-Manual-CN/01-overview\"},{\"text\":\"RTKLIB-Source-Notes\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview\"}]}]},{\"text\":\"Fusion\",\"items\":[{\"text\":\"KF-GINS-Py\",\"link\":\"/algorithm/KF-GINS-Py/\"}]},{\"text\":\"Indoor\",\"items\":[{\"text\":\"IndoorFusionNav\",\"link\":\"/algorithm/IndoorFusionNav/\"}]}],\"sidebar\":{\"/robot/Nav-Tools/\":[{\"text\":\"Nav-Tools\",\"link\":\"/robot/Nav-Tools/01-overview\"},{\"text\":\"1. 简介\",\"link\":\"/robot/Nav-Tools/01-overview\"},{\"text\":\"2. 基本使用\",\"link\":\"/robot/Nav-Tools/02-basic_usage\"},{\"text\":\"3. 机器人应用\",\"link\":\"/robot/Nav-Tools/03-robot\"},{\"text\":\"4. 感知模块\",\"link\":\"/robot/Nav-Tools/04-perception\"},{\"text\":\"5. 定位模块\",\"link\":\"/robot/Nav-Tools/05-localization\"},{\"text\":\"6. 规控模块\",\"link\":\"/robot/Nav-Tools/06-control\"}],\"/algorithm/MobileGNSS-SPP/\":[{\"text\":\"MobileGNSS-SPP\",\"link\":\"/algorithm/MobileGNSS-SPP/\"},{\"text\":\"1. 摘要\",\"link\":\"/algorithm/MobileGNSS-SPP/01-overview\"},{\"text\":\"2. 数据分析\",\"link\":\"/algorithm/MobileGNSS-SPP/02-data_analysis\"},{\"text\":\"3. RWLS\",\"link\":\"/algorithm/MobileGNSS-SPP/03-rwls\"},{\"text\":\"4. EKF\",\"link\":\"/algorithm/MobileGNSS-SPP/04-ekf\"},{\"text\":\"5. 代价最小化\",\"link\":\"/algorithm/MobileGNSS-SPP/05-mincost\"},{\"text\":\"附录\",\"link\":\"/algorithm/MobileGNSS-SPP/06-appendix\"},{\"text\":\"参考资料\",\"link\":\"/algorithm/MobileGNSS-SPP/07-reference\"}],\"/algorithm/RTKLIB-Manual-CN/\":[{\"text\":\"RTKLIB-Manual-CN\",\"link\":\"\"},{\"text\":\"1. 简介\",\"link\":\"/algorithm/RTKLIB-Manual-CN/01-overview\"},{\"text\":\"2. 准备\",\"link\":\"/algorithm/RTKLIB-Manual-CN/02-prepare\"},{\"text\":\"3. 操作指南\",\"collapsed\":true,\"items\":[{\"text\":\"3.1 下载与使用\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.1\"},{\"text\":\"3.2 RTKNAVI：实时定位程序\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.2\"},{\"text\":\"3.3 STRSVR：数据流处理\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.3\"},{\"text\":\"3.4 RTKPOST：后处理分析\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.4\"},{\"text\":\"3.5 RTKLIB 配置参数\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.5\"},{\"text\":\"3.6 RTKCONV：数据格式转换\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.6\"},{\"text\":\"3.7 RTKPLOT：解算结果可视化\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.7\"},{\"text\":\"3.8 RTKPLOT：观测数据可视化\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.8\"},{\"text\":\"3.9 RTKGET：GNSS产品和数据下载\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.9\"},{\"text\":\"3.10 SRCTBLBROWS：NTRIP资源列表\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.10\"},{\"text\":\"3.11 RTKLIB CUI程序\",\"link\":\"/algorithm/RTKLIB-Manual-CN/03-instructions-3.11\"}]},{\"text\":\"4. 应用构建\",\"link\":\"/algorithm/RTKLIB-Manual-CN/04-build\"},{\"text\":\"附录A. CUI指令\",\"link\":\"/algorithm/RTKLIB-Manual-CN/05-appendixA\"},{\"text\":\"附录B. 文件格式\",\"link\":\"/algorithm/RTKLIB-Manual-CN/06-appendixB\"},{\"text\":\"附录C. C API\",\"link\":\"/algorithm/RTKLIB-Manual-CN/07-appendixC\"},{\"text\":\"附录D. 文件与报文\",\"link\":\"/algorithm/RTKLIB-Manual-CN/08-appendixD\"},{\"text\":\"附录E. 模型与算法\",\"collapsed\":true,\"items\":[{\"text\":\"常用符号\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.0\"},{\"text\":\"E.1 时间系统\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.1\"},{\"text\":\"E.2 坐标系统\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.2\"},{\"text\":\"E.3 信号测量模型\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.3\"},{\"text\":\"E.4 卫星星历与钟差\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.4\"},{\"text\":\"E.5 大气模型\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.5\"},{\"text\":\"E.6 单点定位\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.6\"},{\"text\":\"E.7 相对定位\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.7\"},{\"text\":\"E.8 精密单点定位\",\"link\":\"/algorithm/RTKLIB-Manual-CN/09-appendixE-E.8\"}]},{\"text\":\"附录F. 配置文件\",\"link\":\"/algorithm/RTKLIB-Manual-CN/10-appendixF\"},{\"text\":\"附录G. GNSS信号\",\"link\":\"/algorithm/RTKLIB-Manual-CN/11-appendixG\"},{\"text\":\"附录H. 常见问题\",\"link\":\"/algorithm/RTKLIB-Manual-CN/12-appendixH\"},{\"text\":\"参考文献\",\"link\":\"/algorithm/RTKLIB-Manual-CN/13-reference\"}],\"/algorithm/RTKLIB-Source-Notes/\":[{\"text\":\"RTKLIB-Source-Notes\",\"link\":\"\"},{\"text\":\"1. 初识RTKLIB\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview\",\"collapsed\":true,\"items\":[{\"text\":\"1.1 简介\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview-1.1\"},{\"text\":\"1.2 基本使用\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview-1.2\"},{\"text\":\"1.3 RTKLIB手册\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview-1.3\"},{\"text\":\"1.4 核心代码库\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview-1.4\"},{\"text\":\"1.5 延伸项目\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview-1.5\"},{\"text\":\"1.6 学习建议\",\"link\":\"/algorithm/RTKLIB-Source-Notes/01-overview-1.6\"}]},{\"text\":\"2. 实时定位程序\",\"link\":\"/algorithm/RTKLIB-Source-Notes/02-rtknavi-rtkrcv\"},{\"text\":\"3. 后处理程序\",\"link\":\"/algorithm/RTKLIB-Source-Notes/03-rtkpos-rnx2rtkp-rtkplot-rtkget\"},{\"text\":\"4. 基础工具库\",\"link\":\"/algorithm/RTKLIB-Source-Notes/04-rtkcmn\"},{\"text\":\"5. 原始观测数据\",\"link\":\"/algorithm/RTKLIB-Source-Notes/05-obs\"},{\"text\":\"6. 卫星轨道计算\",\"link\":\"/algorithm/RTKLIB-Source-Notes/06-eph\"},{\"text\":\"7. 观测值改正\",\"link\":\"/algorithm/RTKLIB-Source-Notes/07-obs-correction\"},{\"text\":\"8. 伪距单点定位\",\"collapsed\":true,\"link\":\"/algorithm/RTKLIB-Source-Notes/08-spp\",\"items\":[{\"text\":\"8.1 pntpos()：算法入口\",\"link\":\"/algorithm/RTKLIB-Source-Notes/08-spp-8.1\"},{\"text\":\"8.2 estpos()：伪距定位\",\"link\":\"/algorithm/RTKLIB-Source-Notes/08-spp-8.2\"},{\"text\":\"8.3 estvel()：多普勒定速\",\"link\":\"/algorithm/RTKLIB-Source-Notes/08-spp-8.3\"},{\"text\":\"8.4 raim_fde()：正直性检测\",\"link\":\"/algorithm/RTKLIB-Source-Notes/08-spp-8.4\"}]},{\"text\":\"9. 相对定位\",\"collapsed\":true,\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk\",\"items\":[{\"text\":\"9.1 主要数据类型\",\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk-9.1\"},{\"text\":\"9.2 rtkpos(): 算法入口\",\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk-9.2\"},{\"text\":\"9.3 udstate(): 时间更新\",\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk-9.3\"},{\"text\":\"9.4 *dres(): 观测方程的构建\",\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk-9.4\"},{\"text\":\"9.5 filter(): 量测更新\",\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk-9.5\"},{\"text\":\"9.6 *amb(): 模糊度固定\",\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk-9.6\"},{\"text\":\"9.7 detslp*(): 周跳探测\",\"link\":\"/algorithm/RTKLIB-Source-Notes/09-rtk-9.7\"}]},{\"text\":\"10. 精密单点定位\",\"link\":\"/algorithm/RTKLIB-Source-Notes/10-ppp\"},{\"text\":\"11. RTKLIB工程优化\",\"link\":\"/algorithm/RTKLIB-Source-Notes/11-optimization\"},{\"text\":\"附录A. 延伸阅读\",\"link\":\"/algorithm/RTKLIB-Source-Notes/A-appendixA\"},{\"text\":\"附录B. 常见问题\",\"link\":\"/algorithm/RTKLIB-Source-Notes/B-appendixB\"},{\"text\":\"附录C. 配置参数解析\",\"collapsed\":true,\"link\":\"/algorithm/RTKLIB-Source-Notes/C-appendixC\",\"items\":[{\"text\":\"C.1 Setting1\",\"link\":\"/algorithm/RTKLIB-Source-Notes/C-appendixC-C.1\"},{\"text\":\"C.2 Setting2\",\"link\":\"/algorithm/RTKLIB-Source-Notes/C-appendixC-C.2\"},{\"text\":\"C.3 Statistics\",\"link\":\"/algorithm/RTKLIB-Source-Notes/C-appendixC-C.3\"}]},{\"text\":\"参考资料\",\"link\":\"/algorithm/RTKLIB-Source-Notes/Z-reference\"}],\"/hide/tools/vitepress/\":[{\"text\":\"Tutorials\",\"link\":\"/hide/tools/vitepress/01-tutorials\"},{\"text\":\"Issues\",\"link\":\"/hide/tools/vitepress/02-issues\"}],\"/hide/tools/git/\":[{\"text\":\"Tutorials\",\"link\":\"/hide/tools/git/01-tutorials\"}],\"/hide/coding/cpp-style/\":[{\"text\":\"CPP-Style\",\"link\":\"\"},{\"text\":\"1. Google\",\"link\":\"/hide/coding/cpp-style/01-google\"},{\"text\":\"2. Huawei\",\"link\":\"/hide/coding/cpp-style/02-huawei\"},{\"text\":\"3. MySelf\",\"link\":\"/hide/coding/cpp-style/03-myself\"}],\"/hide/examples/\":[{\"text\":\"Examples\",\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/hide/examples/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/hide/examples/api-examples\"}]}]},\"outline\":{\"label\":\"目录\",\"level\":[2,3]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/salmoshu\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>